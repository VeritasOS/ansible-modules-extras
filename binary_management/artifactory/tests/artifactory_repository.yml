---
- hosts: test
  tasks:
  - name: Create local repository
    artifactory_repository:
        artifactory_url: "http://localhost:8081"
        artifactory_username: "admin"
        artifactory_password: "password"

        action: "create"
        type: "local"
        key: "test-local-repo"
        package_type: "maven"

        # suffix: "stage"  # if suffix is required

- hosts: test
  tasks:
  - name: Create remote repository
    artifactory_repository:
        artifactory_url: "http://localhost:8081"
        artifactory_username: "admin"
        artifactory_password: "password"

        action: "create"
        type: "remote"
        key: "test-remote-repo"
        package_type: "docker"
        url: "http://hub.docker.com"

- hosts: test
  tasks:
  - name: Create virtual repository
    artifactory_repository:
        artifactory_url: "http://localhost:8081"
        artifactory_username: "admin"
        artifactory_password: "password"

        action: "create"
        type: "virtual"
        key: "test-virtual-repo"
        package_type: "maven"
        repositories: ["test-remote-repo"]

- hosts: test
  tasks:
  - name: Delete local/remote/virtual repository
    artifactory_repository:
        artifactory_url: "http://localhost:8081"
        artifactory_username: "admin"
        artifactory_password: "password"

        action: "delete"
        key: "test-virtual-repo"

- hosts: test
  tasks:
  - name: Bulk create local/remote/virtual repositories
    artifactory_repository:
        artifactory_url: "http://localhost:8081"
        artifactory_username: "admin"
        artifactory_password: "password"

        action: "bulk_create"
        path: "samples/artifactory_repositories.yml"

- hosts: test
  tasks:
  - name: Bulk delete local/remote/virtual repositories
    artifactory_repository:
        artifactory_url: "http://localhost:8081"
        artifactory_username: "admin"
        artifactory_password: "password"

        action: "bulk_delete"
        path: "samples/artifactory_repositories.yml"
